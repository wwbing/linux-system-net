# Linux进程间通信（IPC）方式说明

本目录包含了Linux系统中各种进程间通信（IPC）方式的示例代码。以下是对各种IPC方式的简要说明及其区别。

## 1. 管道（Pipe）

### 1.1 匿名管道（Anonymous Pipe）
- **特点**：只能用于有亲缘关系的进程间通信（如父子进程）
- **实现**：通过`pipe()`系统调用创建
- **数据流**：单向数据流，需要两个管道才能实现双向通信
- **生命周期**：随进程创建和结束

### 1.2 有名管道（Named Pipe/FIFO）
- **特点**：可用于无亲缘关系的进程间通信
- **实现**：通过`mkfifo()`系统调用创建
- **数据流**：单向数据流
- **生命周期**：存在于文件系统中，直到被显式删除

## 2. 共享内存（Shared Memory）

### 2.1 mmap共享内存
- **特点**：
  - 基于文件映射的共享内存
  - 可以映射文件到进程地址空间，也可以创建匿名映射
  - 更现代、更灵活的API
- **实现**：通过`mmap()`系统调用创建
- **优势**：
  - 可以直接映射文件，便于处理文件数据
  - 支持私有映射和共享映射
  - 可以指定映射区域的保护属性
  - 与POSIX标准兼容，更便于跨平台开发

### 2.2 System V共享内存
- **特点**：
  - 传统的System V IPC机制之一
  - 基于内核分配的共享内存段
  - 更老的API，但在许多系统中仍然广泛使用
- **实现**：通过`shmget()`、`shmat()`、`shmdt()`和`shmctl()`系统调用创建和管理
- **优势**：
  - 与其他System V IPC机制（如信号量、消息队列）配合使用方便
  - 在某些老系统上可能是唯一可用的共享内存机制

**主要区别**：
1. **API风格**：mmap是POSIX标准，接口更现代；System V是传统Unix系统的接口
2. **文件关联**：mmap可以直接映射文件，System V共享内存与文件系统无关
3. **内存管理**：mmap可以更灵活地控制内存映射的属性和保护
4. **使用场景**：mmap更适合处理文件数据，System V更适合纯内存数据共享

## 3. 消息队列（Message Queue）
- **特点**：进程间以消息为单位进行数据交换
- **实现**：通过`msgget()`、`msgsnd()`、`msgrcv()`和`msgctl()`系统调用创建和管理
- **优势**：支持消息的优先级，可以按类型接收消息

## 4. 信号（Signal）
- **特点**：用于通知进程发生了某种事件，是一种异步通信机制
- **实现**：通过`signal()`、`sigaction()`和`kill()`等系统调用
- **优势**：实时性好，适合用于事件通知
- **局限性**：只能传递有限的信息，主要用于通知事件发生

## 5. 套接字（Socket）

### 5.1 网络套接字（Network Socket）
- **特点**：
  - 可用于不同主机间的进程通信
  - 支持TCP和UDP等多种协议
  - 可以跨网络通信
- **实现**：通过BSD套接字API（socket、bind、listen、accept、connect等）
- **优势**：可以实现跨主机、跨网络的通信

### 5.2 Unix域套接字（Unix Domain Socket）
- **特点**：
  - 仅用于同一主机上的进程通信
  - 基于文件系统路径标识
  - 不需要网络协议栈的参与
- **实现**：使用与网络套接字相同的API，但地址族为AF_UNIX
- **优势**：
  - 比网络套接字更高效（不需要协议栈处理）
  - 可以传递文件描述符
  - 支持SOCK_STREAM和SOCK_DGRAM两种类型

**主要区别**：
1. **通信范围**：网络套接字可以跨主机通信，Unix域套接字仅限于同一主机
2. **性能**：Unix域套接字不需要经过网络协议栈，性能更高
3. **地址标识**：网络套接字使用IP地址和端口，Unix域套接字使用文件系统路径
4. **特殊功能**：Unix域套接字可以传递文件描述符，网络套接字不行
5. **安全性**：Unix域套接字基于文件系统权限控制访问，更安全

## 6. 信号量（Semaphore）
- **特点**：用于进程间同步，控制对共享资源的访问
- **实现**：通过`semget()`、`semop()`和`semctl()`系统调用创建和管理
- **优势**：可以实现复杂的同步操作，支持原子操作

## 总结

选择哪种IPC机制取决于具体需求：
- **管道**：简单的单向数据流
- **共享内存**：高性能、大数据量的共享
- **消息队列**：结构化数据的异步交换
- **信号**：简单的事件通知
- **套接字**：灵活的本地或远程通信
- **信号量**：进程同步和互斥
